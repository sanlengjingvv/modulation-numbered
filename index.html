<html>

<head>
    <title>转调</title>
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script type="text/javascript" src="transfer.js"></script>
</head>
<script type="text/javascript">
    let trans = () => {
        let xiao = document.querySelector("#xiao").value
        let origin = document.querySelector("#origin-solfeggio").value.trim().split(' ')
        let keynote = document.querySelector("#keynote").value

        let transformed = []
        origin.forEach(element => {
            transformed.push(transfer(xiao, element, keynote))
        })
        let result = ''
        transformed.forEach(element => {
            result = result + element
            result = result + ' '
        })
        document.querySelector("#transformed-solfeggio").innerText = (result !== undefined) ? result : ''

    }
    document.onreadystatechange = () => {
        if (document.readyState === "complete") {
            trans()
        }
    }
</script>

<style>
    .center {
    margin: auto;
    width: 50%;
    border: 3px solid;
    padding: 10px;
    }

    body {font-size: 30px;}
</style>

<body>
    <div class="center">
        <div id="sheet" onchange="trans()">
            <span>调号: 1 = </span>
            <select id="keynote">
                <option value="C">C</option>
                <option value="D">D</option>
                <option value="E">E</option>
                <option value="F">F</option>
                <option value="G">G</option>
                <option value="A">A</option>
                <option value="bB">bB</option>
            </select>
        </div>

        <div>
            <span>箫:</span>
            <select id="xiao" onchange="trans()">
                <option value="G">G</option>
                <option value="F">F</option>
                <option value="E">E</option>
            </select>
            <span>调</span>
        </div>
        <br>
        <input type="text" id="origin-solfeggio" value="2. 3. 4. #4. 5. 6. 7. 1 b7" oninput="trans()">
        <p>转为</p>
        <label id="transformed-solfeggio">wait for transfer</label>
    </div>

</body>

</html>